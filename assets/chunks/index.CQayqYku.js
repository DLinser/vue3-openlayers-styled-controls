var ke=Object.defineProperty;var Me=(f,t,a)=>t in f?ke(f,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):f[t]=a;var ge=(f,t,a)=>Me(f,typeof t!="symbol"?t+"":t,a);import{d as Y,c as H,r as J,n as G,o as y,j as g,L as Q,p as k,h as he,v as ve,_ as ae,x as ie,q as se,e as Z,k as q,F as ne,b as te,G as M,B as ue,w as R,C as $,t as oe,Z as pe,N as ze,am as Te,an as $e,P as He}from"./framework.DcR0kvgI.js";import{cv as ce,bo as we,de as Ee,b5 as me,df as Fe,dg as Oe,dh as Pe,O as ye,cz as Ie,cC as Be,cA as Re,cB as Ve}from"./Draw.FEruzwpw.js";const qe={zoomIn:{title:"放大"},zoomOut:{title:"缩小"},fullScreen:{enter:"全屏",exit:"退出全屏"},measureLength:{title:"测量距离",stop:"停止测量",startHelp:"点击开始绘制",continueHelp:"点击继续绘制线"},measureArea:{title:"测量面积",stop:"停止测量",startHelp:"点击开始绘制",continueHelp:"点击继续绘制多边形",squareMeters:"平方米",squareKilometers:"平方公里"},clear:{title:"清除"},swipe:{title:"卷帘"},baseLayerSwitcher:{title:"底图切换",noPreview:"无预览",unnamedLayer:"未命名图层"},plotControl:{title:"标绘",point:"点",lineString:"线",polygon:"面",circle:"圆",box:"矩形",square:"正方形",straightArrow:"直线箭头",fineArrow:"精细箭头",star:"星形"},exportMap:{title:"导出地图"},home:{title:"复位"},textLabel:{title:"文字标注",inputPrompt:"请输入标注文字",confirm:"确定",cancel:"取消"}},Ge={zoomIn:{title:"Zoom in"},zoomOut:{title:"Zoom out"},fullScreen:{enter:"Full screen",exit:"Exit full screen"},measureLength:{title:"Measure distance",stop:"Stop measuring",startHelp:"Click to start drawing",continueHelp:"Click to continue drawing line"},measureArea:{title:"Measure area",stop:"Stop measuring",startHelp:"Click to start drawing",continueHelp:"Click to continue drawing polygon",squareMeters:"square meters",squareKilometers:"square kilometers"},clear:{title:"Clear"},swipe:{title:"Swipe"},baseLayerSwitcher:{title:"Base layer switcher",noPreview:"No preview",unnamedLayer:"Unnamed layer"},plotControl:{title:"Plot",point:"Point",lineString:"Line",polygon:"Polygon",circle:"Circle",box:"Box",square:"Square",straightArrow:"Straight Arrow",fineArrow:"Fine Arrow",star:"Star"},exportMap:{title:"Export map"},home:{title:"Home"},textLabel:{title:"Text label",inputPrompt:"Enter label text",confirm:"OK",cancel:"Cancel"}};class _e{constructor(t){ge(this,"locale","zh-CN");ge(this,"messages",{"zh-CN":qe,en:Ge});t&&(this.locale=t.locale||this.locale,this.messages={...this.messages,...t.messages})}t(t){const a=t.split(".");let o=this.messages[this.locale];if(!o)return t;for(const e of a)if(typeof o=="object"&&o!==null)o=o[e];else{o=void 0;break}return typeof o=="string"?o:t}setLocale(t){this.locale=t}getLocale(){return this.locale}}const U=new _e;function We(f){return new _e(f)}function jt(){return{t:U.t.bind(U),locale:U.getLocale()}}let B=null;function je(f){B=f}const De=["title"],Ne=Y({__name:"OlStyledZoomInControl",emits:["click","zoom-in"],setup(f,{expose:t,emit:a}){const o=i=>B?B.t(i):U.t(i),e=a,r=Q("map"),u=i=>{if(e("click",i),r){const l=r.getView(),s=l.getZoom();s!==void 0&&(l.animate({zoom:s+1,duration:500,easing:c=>1-Math.pow(1-c,3)}),e("zoom-in",s+1))}else console.warn("地图实例未找到")};return t({}),(i,l)=>(y(),H("div",{title:o("zoomIn.title"),class:G(["ol-styled-control-item","zoom-in-control"]),onClick:u},[J(i.$slots,"default",{},()=>[l[0]||(l[0]=g("svg",{class:"zoom-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"})],-1))])],8,De))}}),Ze=["title"],Ue=Y({__name:"OlStyledZoomOutControl",emits:["click","zoom-out"],setup(f,{expose:t,emit:a}){const o=i=>B?B.t(i):U.t(i),e=a,r=Q("map"),u=i=>{if(e("click",i),r){const l=r.getView(),s=l.getZoom();s!==void 0&&(l.animate({zoom:s-1,duration:500,easing:c=>1-Math.pow(1-c,3)}),e("zoom-out",s-1))}else console.warn("地图实例未找到")};return t({}),(i,l)=>(y(),H("div",{title:o("zoomOut.title"),class:G(["ol-styled-control-item","zoom-out-control"]),onClick:u},[J(i.$slots,"default",{},()=>[l[0]||(l[0]=g("svg",{class:"zoom-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M5 11h14v2H5z"})],-1))])],8,Ze))}}),Ke=Y({__name:"OlStyledControlBar",props:{position:{default:"bottom-right"},theme:{default:"default"}},emits:["mounted"],setup(f,{expose:t,emit:a}){const o=f,e=a,r=k(null),u=he(()=>({"top-left":"top-left-position","top-right":"top-right-position","bottom-left":"bottom-left-position","bottom-right":"bottom-right-position"})[o.position]||"bottom-right-position"),i=he(()=>`${o.theme}-theme`),l=he(()=>["ol-styled-control-bar",u.value,i.value].filter(Boolean));return ve(()=>{r.value&&e("mounted",r.value)}),t({controlBar:r}),(s,c)=>(y(),H("div",{ref_key:"controlBar",ref:r,class:G(l.value)},[J(s.$slots,"default",{},void 0,!0)],2))}}),Xe=ae(Ke,[["__scopeId","data-v-0f068d0d"]]),Ye=["title"],Je={key:0,class:"fullscreen-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},Qe={key:1,class:"fullscreen-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},et=Y({__name:"OlStyledFullScreenControl",emits:["click","fullscreen-change"],setup(f,{expose:t,emit:a}){const o=s=>B?B.t(s):U.t(s),e=a,r=Q("map"),u=k(!1),i=s=>{if(e("click",s),r){const c=r.getTargetElement();c&&(u.value?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullscreen&&c.msRequestFullscreen())}else console.warn("地图实例未找到")},l=()=>{u.value=!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement),e("fullscreen-change",u.value)};return ve(()=>{document.addEventListener("fullscreenchange",l),document.addEventListener("mozfullscreenchange",l),document.addEventListener("webkitfullscreenchange",l),document.addEventListener("msfullscreenchange",l)}),ie(()=>{document.removeEventListener("fullscreenchange",l),document.removeEventListener("mozfullscreenchange",l),document.removeEventListener("webkitfullscreenchange",l),document.removeEventListener("msfullscreenchange",l)}),t({isFullscreen:u}),(s,c)=>(y(),H("div",{title:u.value?o("fullScreen.exit"):o("fullScreen.enter"),class:G(["ol-styled-control-item","fullscreen-control"]),onClick:i},[J(s.$slots,"default",{},()=>[u.value?(y(),H("svg",Qe,[...c[1]||(c[1]=[g("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)])])):(y(),H("svg",Je,[...c[0]||(c[0]=[g("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])]))])],8,Ye))}}),le=k({measureLengthActive:!1,measureAreaActive:!1,swipeActive:!1,baseLayerSwitcherActive:!1,plotActive:!1,clearPlotLayerTag:!1,textLabelActive:!1});function re(){return{map:Q("map"),controlState:le,closeAllControls:()=>{le.value.measureLengthActive=!1,le.value.measureAreaActive=!1,le.value.swipeActive=!1,le.value.baseLayerSwitcherActive=!1,le.value.plotActive=!1,le.value.textLabelActive=!1},clearPlotLayer:()=>{le.value.clearPlotLayerTag=!0}}}const tt=["title"],ot={class:"ol-styled-tooltip ol-styled-tooltip-measure"},lt={class:"ol-styled-tooltip ol-styled-tooltip-measure"},nt={class:"ol-styled-tooltip ol-styled-tooltip-info"},st=Y({__name:"OlStyledMeasureLengthControl",emits:["click","measure-start","measure-end","geometry-change"],setup(f,{expose:t,emit:a}){const o=d=>B?B.t(d):U.t(d),e=a,r=Q("map"),u=k("LineString"),i=k(null),{controlState:l}=re(),s=k(null),c=k([]),C=k(""),b=k([]),E=k(null),P=k("");let W,j;const ee=o("measureLength.continueHelp");function S(d){var p;if(e("measure-start",d),r&&(i.value=d.feature,((p=i.value.getGeometry())==null?void 0:p.getType())=="LineString")){const v=i.value.getGeometry();s.value=v.getLastCoordinate(),W=v.on("change",function(L){const V=L.target;e("geometry-change",{geom:V,length:w(V),coord:V.getLastCoordinate()}),C.value=w(V),s.value=V.getLastCoordinate()})}}function h(d){e("measure-start",d),i.value=null,c.value.push(s.value),s.value=null,b.value.push(C.value+""),C.value="",W&&ce(W)}function F(d){var L;if(d.dragging)return;let p=o("measureLength.startHelp");((L=i.value)==null?void 0:L.getGeometry())instanceof we&&(p=ee),P.value=p,E.value=d.coordinate}function w(d){const p=r==null?void 0:r.getView().getProjection().getCode(),v=Ee(d,{projection:p});let L="";return v>100?L=Math.round(v/1e3*100)/100+" km":L=Math.round(v*100)/100+" m",L}const z=d=>{e("click",d),r?l.value.measureLengthActive?m():I():console.warn("地图实例未找到")},I=()=>{l.value.measureLengthActive=!0,r&&(j=r.on("pointermove",F))},n=()=>{c.value=[],b.value=[],j&&ce(j),W&&(ce(W),W=null)},m=()=>{l.value.measureLengthActive=!1};return se(()=>l.value.measureLengthActive,d=>{d?l.value.measureAreaActive=!1:n()}),ve(()=>{}),ie(()=>{}),t({startMeasuring:I,stopMeasuring:m}),(d,p)=>{const v=$("ol-overlay"),L=$("ol-interaction-draw"),V=$("ol-source-vector"),N=$("ol-style-stroke"),O=$("ol-style-fill"),_=$("ol-style-circle"),x=$("ol-style"),A=$("ol-vector-layer");return y(),H("div",{title:q(l).measureLengthActive?o("measureLength.stop"):o("measureLength.title"),class:G(["ol-styled-control-item","measure-control",{active:q(l).measureLengthActive}]),onClick:z},[q(l).measureLengthActive?(y(),H(ne,{key:0},[(y(!0),H(ne,null,ue(c.value,(T,D)=>(y(),te(v,{key:"tooltipCoordIndex"+D,position:T,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1},{default:R(()=>[g("div",ot,oe(b.value[D]),1)]),_:2},1032,["position"]))),128)),s.value?(y(),te(v,{key:0,position:s.value,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1},{default:R(()=>[g("div",lt,oe(C.value),1)]),_:1},8,["position"])):Z("",!0),E.value?(y(),te(v,{key:1,position:E.value,offset:[0,15],positioning:"top-center"},{default:R(()=>[g("div",nt,oe(P.value),1)]),_:1},8,["position"])):Z("",!0),M(A,null,{default:R(()=>[M(V,null,{default:R(()=>[M(L,{type:u.value,onDrawend:h,onDrawstart:S},null,8,["type"])]),_:1}),M(x,null,{default:R(()=>[M(N,{color:"#ffcc33",width:2}),M(O,{color:"rgba(255, 255, 255, 0.2)"}),M(_,{radius:7},{default:R(()=>[M(O,{color:"#ffcc33"})]),_:1})]),_:1})]),_:1})],64)):Z("",!0),J(d.$slots,"default",{},()=>[p[0]||(p[0]=g("svg",{class:"measure-icon",viewBox:"0 0 1024 1024",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M348.1633588 981.73103474l633.56767594-633.56767594-305.89439354-305.89439354L42.26896526 675.8366412 348.1633588 981.73103474z m-131.09759723-393.29279169L304.46415972 675.8366412c12.09152596 12.09152596 31.60767312 12.09152596 43.69919908 0s12.09152596-31.60767312 0-43.69919908l-87.39839816-87.39839815 65.54879862-65.54879862L413.71215742 566.58864351c12.09152596 12.09152596 31.60767312 12.09152596 43.69919907 0s12.09152596-31.60767312 0-43.69919908l-87.39839815-87.39839815 65.54879861-65.54879862L522.96015511 457.34064581c12.09152596 12.09152596 31.60767312 12.09152596 43.69919908 0 12.09152596-12.09152596 12.09152596-31.60767312 0-43.69919907l-87.39839816-87.39839816 65.54879862-65.54879861L632.2081528 348.09264812c12.09152596 12.09152596 31.60767312 12.09152596 43.69919908 0 12.09152596-12.09152596 12.09152596-31.60767312 0-43.69919908l-87.39839816-87.39839815 87.39839816-87.39839816 218.49599539 218.49599539L348.1633588 894.33263659l-218.49599539-218.49599539 87.39839816-87.39839815z"})],-1))])],10,tt)}}}),rt=["title"],at={class:"ol-styled-tooltip ol-styled-tooltip-measure"},it={class:"ol-styled-tooltip ol-styled-tooltip-measure"},ct={class:"ol-styled-tooltip ol-styled-tooltip-info"},ut=Y({__name:"OlStyledMeasureAreaControl",emits:["click","measure-start","measure-end"],setup(f,{expose:t,emit:a}){const o=d=>B?B.t(d):U.t(d),{controlState:e}=re(),r=a,u=Q("map"),i=k("Polygon"),l=k(null),s=k(null),c=k([]),C=k(""),b=k([]),E=k(null),P=k("");let W,j;const ee=o("measureArea.continueHelp");function S(d){var p;if(u&&(l.value=d.feature,((p=l.value.getGeometry())==null?void 0:p.getType())=="Polygon")){const v=l.value.getGeometry(),L=v.getExtent();L&&L.length&&(s.value=me(L)),W=v.on("change",function(V){const N=V.target;C.value=w(N);const O=N.getExtent();s.value=me(O)})}}function h(){l.value=null,c.value.push(s.value),s.value=null,b.value.push(C.value+""),C.value="",ce(W)}function F(d){var L;if(d.dragging)return;let p=o("measureArea.startHelp");const v=(L=l.value)==null?void 0:L.getGeometry();(v==null?void 0:v.getType())=="Polygon"&&(p=ee),P.value=p,E.value=d.coordinate}function w(d){const p=u==null?void 0:u.getView().getProjection().getCode(),v=Fe(d,{projection:p});let L="";return v>1e4?L=Math.round(v/1e6*100)/100+" km²":L=Math.round(v*100)/100+" m²",L}const z=d=>{r("click",d),u?e.value.measureAreaActive?m():n():console.warn("地图实例未找到")},I=()=>{c.value=[],b.value=[],ce(j)},n=()=>{e.value.measureAreaActive=!0,u&&(j=u.on("pointermove",F)),r("measure-start")},m=()=>{e.value.measureAreaActive=!1};return se(()=>e.value.measureAreaActive,d=>{d?e.value.measureLengthActive=!1:I()}),ie(()=>{}),t({startMeasuring:n,stopMeasuring:m}),(d,p)=>{const v=$("ol-overlay"),L=$("ol-interaction-draw"),V=$("ol-source-vector"),N=$("ol-style-stroke"),O=$("ol-style-fill"),_=$("ol-style-circle"),x=$("ol-style"),A=$("ol-vector-layer");return y(),H("div",{title:q(e).measureAreaActive?o("measureArea.stop"):o("measureArea.title"),class:G(["ol-styled-control-item","measure-area-control",{active:q(e).measureAreaActive}]),onClick:z},[J(d.$slots,"default",{},()=>[p[0]||(p[0]=g("svg",{class:"measure-area-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}),g("path",{d:"M7 7h10v10H7z",fill:"none",stroke:"currentColor","stroke-width":"1"})],-1))],!0),q(e).measureAreaActive?(y(),H(ne,{key:0},[(y(!0),H(ne,null,ue(c.value,(T,D)=>(y(),te(v,{key:"tooltipCoordIndex"+D,position:T,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1},{default:R(()=>[g("div",at,oe(b.value[D]),1)]),_:2},1032,["position"]))),128)),s.value?(y(),te(v,{key:0,position:s.value,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1},{default:R(()=>[g("div",it,oe(C.value),1)]),_:1},8,["position"])):Z("",!0),E.value?(y(),te(v,{key:1,position:E.value,offset:[0,15],positioning:"top-center"},{default:R(()=>[g("div",ct,oe(P.value),1)]),_:1},8,["position"])):Z("",!0),M(A,null,{default:R(()=>[M(V,null,{default:R(()=>[M(L,{type:i.value,onDrawend:h,onDrawstart:S},null,8,["type"])]),_:1}),M(x,null,{default:R(()=>[M(N,{color:"#ffcc33",width:2}),M(O,{color:"rgba(255, 255, 255, 0.5)"}),M(_,{radius:7},{default:R(()=>[M(O,{color:"#ffcc33"})]),_:1})]),_:1})]),_:1})],64)):Z("",!0)],10,rt)}}}),dt=ae(ut,[["__scopeId","data-v-45f0ac76"]]),ft=["title"],ht=Y({__name:"OlStyledClearControl",emits:["click","clear"],setup(f,{expose:t,emit:a}){const o=s=>B?B.t(s):U.t(s),e=a,r=Q("map"),{closeAllControls:u,clearPlotLayer:i}=re(),l=s=>{e("click",s),r?(u(),i()):console.warn("地图实例未找到")};return t({closeAllControls:u}),(s,c)=>(y(),H("div",{title:o("clear.title"),class:G(["ol-styled-control-item","clear-control"]),onClick:l},[J(s.$slots,"default",{},()=>[c[0]||(c[0]=g("svg",{class:"clear-icon",viewBox:"0 0 1024 1024",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"})],-1))])],8,ft))}}),pt=["title"],mt=Y({__name:"OlStyledSwipeControl",props:{leftLayers:{default:()=>[]},rightLayers:{default:()=>[]},position:{default:.5},orientation:{default:"vertical"}},emits:["click","swipe-active-change"],setup(f,{expose:t,emit:a}){const o=l=>B?B.t(l):U.t(l),{controlState:e}=re(),r=a,u=Q("map"),i=l=>{r("click",l),u?(e.value.swipeActive=!e.value.swipeActive,r("swipe-active-change",e.value.swipeActive)):console.warn("地图实例未找到")};return se(()=>e.value.swipeActive,l=>{l&&(e.value.measureLengthActive=!1,e.value.measureAreaActive=!1)}),ie(()=>{e.value.swipeActive=!1}),t({}),(l,s)=>{const c=$("ol-swipe-control");return y(),H("div",{title:o("swipe.title"),class:G(["ol-styled-control-item","swipe-control",{active:q(e).swipeActive}]),onClick:i},[J(l.$slots,"default",{},()=>[s[0]||(s[0]=g("svg",{viewBox:"0 0 1075 1024",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M878.933333 605.866667h76.8V682.666667h-76.8zM896 814.933333v38.4h25.6c21.333333 0 34.133333-17.066667 34.133333-38.4v-51.2h-76.8v51.2h17.066667zM738.133333 776.533333h76.8V853.333333h-76.8zM878.933333 452.266667h76.8v76.8h-76.8zM716.8 162.133333h76.8v76.8h-76.8zM878.933333 302.933333h76.8v76.8h-76.8zM917.333333 238.933333v-17.066666h38.4v-25.6c0-21.333333-17.066667-34.133333-38.4-34.133334h-55.466666v76.8h55.466666zM507.733333 4.266667v162.133333H93.866667c-21.333333 0-34.133333 17.066667-34.133334 38.4v614.4c0 21.333333 17.066667 34.133333 38.4 34.133333h409.6v166.4h102.4V853.333333h55.466667v-76.8h-55.466667V243.2h29.866667V166.4h-29.866667V4.266667h-102.4zM136.533333 238.933333H512v537.6H136.533333V238.933333z"})],-1))]),q(e).swipeActive&&f.leftLayers.length&&f.rightLayers.length?(y(),te(c,{key:0,layers:f.leftLayers,"right-layers":f.rightLayers,position:f.position,orientation:f.orientation},null,8,["layers","right-layers","position","orientation"])):Z("",!0)],10,pt)}}}),vt=["title"],gt=["title","onClick"],yt={class:"layer-preview"},wt=["src","alt"],_t={key:1,class:"preview-placeholder"},Ct=Y({__name:"OlStyledBaseLayerSwitcher",props:{layerGroup:{},previewCenter:{},previewResolution:{}},emits:["click","base-layer-switcher-active-change","layer-switched"],setup(f,{expose:t,emit:a}){const o=h=>B?B.t(h):U.t(h),e=f,{controlState:r}=re(),u=a,i=Q("map"),l=k(null),s=k("bottom-right");let c=[];const C=()=>e.layerGroup&&e.layerGroup.getLayers?e.layerGroup.getLayers().getArray():i?i.getLayers().getArray().filter(F=>F.constructor.name.includes("Tile")):[];function b(h){return h.get("title")||h.get("name")||o("baseLayerSwitcher.unnamedLayer")}function E(h){var F,w;try{let z=e.previewCenter,I=e.previewResolution,n=null;if(h.constructor.name.includes("LayerGroup")?h.getLayers().getArray().length&&(n=h.getLayers().getArray()[0].getSource()):n=h.getSource(),!z){const m=[-20037508342789244e-9,-20037508342789244e-9,20037508342789244e-9,20037508342789244e-9],d=(F=n==null?void 0:n.getProjection)==null?void 0:F.call(n),p=d==null?void 0:d.getExtent();z=p?me(p):me(m)}if(!I){if(typeof(n==null?void 0:n.getTileGrid)=="function"){const m=n.getTileGrid();m&&typeof m.getResolution=="function"&&(I=m.getResolution(0))}if(I===void 0){const m=(w=n==null?void 0:n.getProjection)==null?void 0:w.call(n),d=m==null?void 0:m.getExtent();d?I=(d[2]-d[0])/256:I=156543.03392804097}}if(h.constructor.name.includes("LayerGroup"))return h.getPreview(z,I);if(typeof(h==null?void 0:h.getPreview)=="function"){const m=h.getPreview(z,I);if(Array.isArray(m)&&m.length>0)return m;if(m)return[m]}if(typeof(n==null?void 0:n.getPreview)=="function"){const m=n.getPreview(z,I);if(m)return[m]}}catch(z){console.warn("获取图层预览失败:",z)}return[]}const P=k([]),W=()=>{c=C(),P.value=c.map(h=>({title:b(h),previews:E(h),active:h.getVisible()}))},j=()=>{if(!l.value)return;const h=l.value.getBoundingClientRect(),F=window.innerWidth,w=window.innerHeight,z=h.left>F/2,I=h.top>w/2;z&&I?s.value="top-left":z&&!I?s.value="bottom-left":!z&&I?s.value="top-right":s.value="bottom-right"},ee=h=>{const F=h.title;P.value.forEach(w=>{w.active=w.title===F}),c.forEach(w=>{b(w)===F?w.setVisible(!0):w.setVisible(!1)}),u("layer-switched",F)},S=h=>{u("click",h),i?(r.value.baseLayerSwitcherActive=!r.value.baseLayerSwitcherActive,u("base-layer-switcher-active-change",r.value.baseLayerSwitcherActive)):console.warn("地图实例未找到")};return se(()=>r.value.baseLayerSwitcherActive,h=>{h&&(j(),W())}),window.addEventListener("resize",()=>{r.value.baseLayerSwitcherActive&&setTimeout(()=>{j()},0)}),ie(()=>{r.value.baseLayerSwitcherActive=!1,window.removeEventListener("resize",j)}),t({switchToLayer:ee,baseLayers:c,getBaseLayers:C,baseLayersConfig:P}),(h,F)=>(y(),H("div",{ref_key:"controlRef",ref:l,title:o("baseLayerSwitcher.title"),class:G(["ol-styled-control-item","base-layer-switcher-control",{active:q(r).baseLayerSwitcherActive}]),onClick:S},[J(h.$slots,"default",{},()=>[F[0]||(F[0]=g("svg",{class:"base-layer-icon",viewBox:"0 0 1024 1024",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M511.8 64.2c-247 0-447.2 200.2-447.2 447.2s200.2 447.2 447.2 447.2S959 758.4 959 511.4 758.8 64.2 511.8 64.2zM778.5 778c-11.7 11.7-24.1 22.5-37 32.5-3-0.9-6.1-1.9-9.4-3-50-16.5-113.5 55.5-155.5 48s-30-1.5-46.4 13.5-82.1 12-114.4 0-8.7-6-44.1-37.4-38.2-28.6-57.4-34.6c-19.2-6-37.7 4.5-56.4-6.9-1.6-1.5-3.2-3-4.8-4.4-8.9-13.4 11.9-38.6 39.3-54.2 30.8-17.5 27.7-81.5 0-107s-92.3-13.5-105.2-9c-6.8 2.4-25.8-6.9-42.2-16.3-6.8-28.6-10.3-58-10.3-88 0-10.4 0.4-20.8 1.3-31.1 7.7-3.2 16.6-7.1 25.9-11.6C189.7 455 192.1 437 211 419s11.6-70.5 11.6-90 1.5-22.5 16.5-22.5 24 24 42.9 0 21.6-13.5 45-45c16.7-22.4 24.2-68.3 27.2-93 3.6-1.7 7.2-3.3 10.8-4.8 46.5-19.6 95.8-29.6 146.8-29.6s100.3 10 146.8 29.6c23.1 9.8 44.9 21.7 65.4 35.7-6 26.8-17.5 62.9-36.3 66.6-30.2 6-69.2-2.3-76.7-10.2s1.7-55.8-68.9-30.3c-19 16.5-21.1 40.5-30.8 51s-83.8 59.9-95.5 107.2-35.4 97.4-47.7 109.8c-12.3 12.4-7.6 83.1 29.9 89s80.8 8 84.1 81c2.4 52.3-13.4 54 0 61.5s33.7 1.4 38.5 19.5c4.9 18 7.7 27 16.4 23.3 0 0 42.4-15.6 67.9-47.2s12-6.3 25.5-31.6 26.6-128.9 14.8-137.9-13.3 1.7-28.3-25.4c-15-27.1-23.5-54.9-65.8-53-42.2 1.9-54-4.4-69.1-24.5s-22.4-33.6 0-47.1 83.9-4.5 106.4 0 101.8-23.3 88.4-7.1c-13.4 16.1-47.9 22.1-47.9 35.6s15 43.3 18.1 64c3.1 20.6 9.2 23.6 40.5-6.7s81.3-22.9 81.3 0.9 27.4 41 28.8 32.1c1.5-9 1.7-43.8 21.4-42.3s48.8-8.1 54.5 10.2c5.7 18.3-22.3 67.8 0 94.8 2.3 2.8 4.6 5.3 6.9 7.6-4.9 23.2-12.1 45.9-21.4 67.9-18.6 44.9-45.8 85.3-80.5 119.9z"})],-1))],!0),q(r).baseLayerSwitcherActive?(y(),H("div",{key:0,class:G(["base-layer-panel",s.value])},[(y(!0),H(ne,null,ue(P.value,(w,z)=>(y(),H("div",{key:z,title:w.title,class:G(["layer-item",{active:w.active}]),onClick:pe(I=>ee(w),["stop"])},[g("div",yt,[w.previews&&w.previews.length?(y(!0),H(ne,{key:0},ue(w.previews,(I,n)=>(y(),H("img",{key:n,src:I,alt:w.title,class:"preview-image",style:ze({zIndex:n+1})},null,12,wt))),128)):(y(),H("div",_t,oe(o("baseLayerSwitcher.noPreview")),1))])],10,gt))),128))],2)):Z("",!0)],10,vt))}}),bt=ae(Ct,[["__scopeId","data-v-1bcffdc2"]]);class Lt{static hexToRgb(t){t=t.replace("#",""),t.length===3&&(t=t.split("").map(o=>o+o).join(""));const a=parseInt(t,16);return{r:a>>16&255,g:a>>8&255,b:a&255}}static hexToRgba(t){t=t.replace("#",""),t.length===3?t=t.split("").map(o=>o+o).join("")+"ff":t.length===6&&(t+="ff");const a=parseInt(t,16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:(a&255)/255}}static rgbToHex(t){const{r:a,g:o,b:e}=t;return"#"+(a<<16|o<<8|e).toString(16).padStart(6,"0")}static rgbaToHex(t){const{r:a,g:o,b:e,a:r}=t,u=Math.round(r*255);return"#"+(a<<24|o<<16|e<<8|u).toString(16).padStart(8,"0")}static rgbToHsl({r:t,g:a,b:o}){t/=255,a/=255,o/=255;const e=Math.max(t,a,o),r=Math.min(t,a,o),u=e-r;let i=0,l=(e+r)/2,s=u===0?0:u/(1-Math.abs(2*l-1));return u!==0&&(e===t?i=(a-o)/u%6:e===a?i=(o-t)/u+2:i=(t-a)/u+4),i=Math.round(i*60),i<0&&(i+=360),{h:i,s,l}}static hslToRgb({h:t,s:a,l:o}){a=Math.min(1,Math.max(0,a)),o=Math.min(1,Math.max(0,o));const e=(1-Math.abs(2*o-1))*a,r=e*(1-Math.abs(t/60%2-1)),u=o-e/2;let i=0,l=0,s=0;return t<60?[i,l,s]=[e,r,0]:t<120?[i,l,s]=[r,e,0]:t<180?[i,l,s]=[0,e,r]:t<240?[i,l,s]=[0,r,e]:t<300?[i,l,s]=[r,0,e]:[i,l,s]=[e,0,r],{r:Math.round((i+u)*255),g:Math.round((l+u)*255),b:Math.round((s+u)*255)}}static setAlpha(t,a){if(t.startsWith("#")){const o=this.hexToRgba(t);return o.a=a,`rgba(${o.r}, ${o.g}, ${o.b}, ${o.a})`}if(t.startsWith("rgb")){const o=t.match(/rgba?\((.+)\)/);if(!o)throw new Error("Invalid rgb/rgba format");const e=o[1].split(",").map(l=>parseFloat(l.trim())),[r,u,i]=e;return`rgba(${r}, ${u}, ${i}, ${a})`}throw new Error("Unsupported format")}static lighten(t,a){const o=this.colorToRgb(t),e=this.rgbToHsl(o);return e.l=Math.min(1,e.l+a),this.rgbToHex(this.hslToRgb(e))}static darken(t,a){const o=this.colorToRgb(t),e=this.rgbToHsl(o);return e.l=Math.max(0,e.l-a),this.rgbToHex(this.hslToRgb(e))}static colorToRgb(t){if(t.startsWith("#"))return this.hexToRgb(t);if(t.startsWith("rgb")){const a=t.match(/rgba?\((.+)\)/);if(!a)throw new Error("Invalid rgb/rgba format");const o=a[1].split(",").map(e=>parseFloat(e.trim()));return{r:o[0],g:o[1],b:o[2]}}throw new Error("Unsupported color format")}static isValid(t){return!!(/^#([0-9a-fA-F]{3,8})$/.test(t)||/^rgba?\(/.test(t))}}const xt=["title"],St={class:"plot-types-container"},At=["title","onClick"],kt=["title"],Mt=Y({__name:"OlStyledPlotControl",props:{plotThemeColor:{default:"#ffcc33"},clearOnClose:{type:Boolean,default:!1}},emits:["click","plot-active-change","plot-start","plot-end"],setup(f,{expose:t,emit:a}){const o=n=>B?B.t(n):U.t(n),{controlState:e,closeAllControls:r}=re(),u=f,i=he(()=>Lt.setAlpha(u.plotThemeColor,.2)),l=a,s=Q("map"),c=k(null),C=k("bottom-right"),b=k(null),E=[{type:"Point",label:o("plotControl.point"),icon:"PointIcon"},{type:"LineString",label:o("plotControl.lineString"),icon:"LineStringIcon"},{type:"Polygon",label:o("plotControl.polygon"),icon:"PolygonIcon"},{type:"Circle",label:o("plotControl.circle"),icon:"CircleIcon"},{type:"Box",label:o("plotControl.box"),icon:"BoxIcon"},{type:"Square",label:o("plotControl.square"),icon:"SquareIcon"},{type:"Star",label:o("plotControl.star"),icon:"StarIcon"},{type:"StraightArrow",label:o("plotControl.straightArrow"),icon:"StraightArrowIcon"},{type:"FineArrow",label:o("plotControl.fineArrow"),icon:"FineArrowIcon"}],P=n=>n?n==="Box"||n==="Square"||n==="StraightArrow"||n==="FineArrow"||n==="Star"?"Circle":n:"Point",W=n=>{if(n)switch(n){case"Box":return Pe();case"Square":return Oe(4);case"StraightArrow":return j();case"FineArrow":return ee();case"Star":return S();default:return}},j=()=>(n,m)=>{if(m||(m=new we([])),n.length>=2){const d=n[0],p=n[1],v=p[0]-d[0],L=p[1]-d[1],V=Math.sqrt(v*v+L*L),N=Math.atan2(L,v);if(V>0){const O=Math.min(V*.2,20),_=N+Math.PI/6,x=N-Math.PI/6,A=[p[0]-O*Math.cos(_),p[1]-O*Math.sin(_)],T=[p[0]-O*Math.cos(x),p[1]-O*Math.sin(x)],D=[d,p,A,p,T];m.setCoordinates(D)}else m.setCoordinates([d,[d[0]+1,d[1]+1]])}return m},ee=()=>{const n=Math.PI/2,m=(_,x)=>{const A=x[0]-_[0],T=x[1]-_[1];return Math.sqrt(A*A+T*T)},d=(_,x)=>{let A=0;const T=Math.asin(Math.abs(x[1]-_[1])/m(_,x));return x[1]>=_[1]&&x[0]>=_[0]?A=T+Math.PI:x[1]>=_[1]&&x[0]<_[0]?A=Math.PI*2-T:x[1]<_[1]&&x[0]<_[0]?A=T:x[1]<_[1]&&x[0]>=_[0]&&(A=Math.PI-T),A},p=(_,x,A,T,D)=>{const K=d(_,x),X=D?K+A:K-A,de=T*Math.cos(X),fe=T*Math.sin(X);return[x[0]+de,x[1]+fe]},v=.1,L=.2,V=.25,N=Math.PI/13,O=Math.PI/8.5;return(_,x)=>{if(x||(x=new ye([])),_.length>=2){const A=_[0],T=_[_.length-1],D=m(A,T);if(D>0){const K=D*v,X=D*L,de=D*V,fe=p(T,A,n,K,!0),Ce=p(T,A,n,K,!1),be=p(A,T,O,de,!1),Le=p(A,T,O,de,!0),xe=p(A,T,N,X,!1),Se=p(A,T,N,X,!0),Ae=[fe,xe,be,T,Le,Se,Ce,fe];x.setCoordinates([Ae])}else{const K=A[0],X=A[1];x.setCoordinates([[[K,X],[K+.5,X],[K+.5,X+.5],[K,X+.5],[K,X]]])}}return x}},S=()=>(n,m)=>{var x;const d=n[0],p=n[n.length-1],v=d[0]-p[0],L=d[1]-p[1],V=Math.sqrt(v*v+L*L),N=Math.atan2(L,v),O=[],_=12;for(let A=0;A<_;++A){const T=N+A*2*Math.PI/_,D=A%2===0?1:.5,K=V*D*Math.cos(T),X=V*D*Math.sin(T);O.push([d[0]+K,d[1]+X])}return O.length>0&&((x=O[0])!=null&&x.length)&&O.push([O[0][0],O[0][1]]),m?m.setCoordinates([O]):m=new ye([O]),m},h=()=>{if(!c.value)return;const n=c.value.getBoundingClientRect(),m=window.innerWidth,d=window.innerHeight,p=n.left>m/2,v=n.top>d/2;p&&v?C.value="top-left":p&&!v?C.value="bottom-left":!p&&v?C.value="top-right":C.value="bottom-right"},F=n=>{l("plot-start",{type:b.value,event:n})},w=n=>{l("plot-end",{type:b.value,event:n})},z=n=>{b.value=n,l("plot-active-change",!0)},I=n=>{l("click",n),s?e.value.plotActive?(e.value.plotActive=!1,l("plot-active-change",!1)):(r(),e.value.plotActive=!0,l("plot-active-change",!0)):console.warn("地图实例未找到")};return se(()=>e.value.plotActive,n=>{n?h():b.value=null}),se(()=>e.value.clearPlotLayerTag,n=>{n&&setTimeout(()=>{e.value.clearPlotLayerTag=!1},100)}),window.addEventListener("resize",()=>{e.value.plotActive&&setTimeout(()=>{h()},0)}),ie(()=>{e.value.plotActive=!1,window.removeEventListener("resize",h)}),t({selectPlotType:z}),(n,m)=>{const d=$("ol-style-stroke"),p=$("ol-style-fill"),v=$("ol-style-circle"),L=$("ol-style"),V=$("ol-interaction-draw"),N=$("ol-source-vector"),O=$("ol-vector-layer");return y(),H("div",{ref_key:"controlRef",ref:c,title:o("plotControl.title"),class:G(["ol-styled-control-item","plot-control",{active:q(e).plotActive}]),onClick:I},[J(n.$slots,"default",{},()=>[m[0]||(m[0]=g("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M512 64C282.8 64 96 250.8 96 480c0 119.6 50.4 227.2 131.2 304.8l-48 87.2 87.2-48C344 884.8 441.6 928 544 928c229.2 0 416-186.8 416-416S773.2 64 544 64z m0 736c-92.4 0-177.2-32-244-88.8l26.4-48c52 36.8 114.4 56.8 181.6 56.8 183.2 0 332-148.8 332-332S727.2 148 544 148 212 296.8 212 480c0 67.2 20 129.6 56.8 181.6l-48 26.4C164 611.2 132 526.4 132 434 132 232.4 296.4 68 544 68S956 232.4 956 434 791.6 800 544 800z"}),g("path",{d:"M480 288h64v352h-64z"}),g("path",{d:"M320 448h384v64H320z"})],-1))],!0),q(e).plotActive?(y(),H("div",{key:0,class:G(["plot-panel",C.value])},[g("div",St,[(y(),H(ne,null,ue(E,_=>g("div",{key:_.type,title:_.label,class:G(["plot-type-item",{active:b.value===_.type}]),onClick:pe(x=>z(_.type),["stop"])},[g("div",{class:"plot-type-icon",title:_.label},[g("div",{class:G([_.icon,"plot-type-icon-content"])},null,2)],8,kt)],10,At)),64))])],2)):Z("",!0),(f.clearOnClose?q(e).plotActive:!q(e).clearPlotLayerTag)?(y(),te(O,{key:1},{default:R(()=>[M(N,null,{default:R(()=>[b.value?(y(),te(V,{key:0,type:P(b.value),geometryFunction:W(b.value),onDrawend:w,onDrawstart:F},{default:R(()=>[M(L,null,{default:R(()=>[M(d,{color:f.plotThemeColor,width:2},null,8,["color"]),M(p,{color:i.value},null,8,["color"]),M(v,{radius:7},{default:R(()=>[M(p,{color:f.plotThemeColor},null,8,["color"]),M(d,{color:f.plotThemeColor,width:2},null,8,["color"])]),_:1})]),_:1})]),_:1},8,["type","geometryFunction"])):Z("",!0)]),_:1}),M(L,null,{default:R(()=>[M(d,{color:f.plotThemeColor,width:2},null,8,["color"]),M(p,{color:i.value},null,8,["color"]),M(v,{radius:7},{default:R(()=>[M(p,{color:f.plotThemeColor},null,8,["color"])]),_:1})]),_:1})]),_:1})):Z("",!0)],10,xt)}}}),zt=ae(Mt,[["__scopeId","data-v-8d14444c"]]),Tt=["title"],$t=Y({__name:"OlStyledExportMapControl",props:{fileName:{default:"map"},type:{default:"png"},quality:{default:.92},background:{default:""}},emits:["click","export-start","export-end","export-error"],setup(f,{expose:t,emit:a}){const o=c=>B?B.t(c):U.t(c),e=f,r=a,u=Q("map"),i=c=>{r("click",c),u?s():console.warn("地图实例未找到")},l=(c,C)=>{const b=document.createElement("a");b.href=c,b.download=C,document.body.appendChild(b),b.click(),document.body.removeChild(b)},s=()=>{u&&(r("export-start"),u.once("rendercomplete",()=>{try{const c=u.getSize();if(!c)throw new Error("地图尺寸不可用");const C=u.getTargetElement(),b=(C==null?void 0:C.querySelectorAll(".ol-layer canvas, canvas"))||[],E=document.createElement("canvas");E.width=c[0],E.height=c[1];const P=E.getContext("2d");if(!P)throw new Error("无法创建画布上下文");e.background&&(P.fillStyle=e.background,P.fillRect(0,0,E.width,E.height)),b.forEach(S=>{var h,F,w;if(S.width>0){const z=(F=(h=S.parentElement)==null?void 0:h.style)==null?void 0:F.opacity;P.globalAlpha=z===""?1:Number(z);const n=(S.style.transform||"").match(/^matrix\(([^\)]*)\)$/);if(n){const m=(w=n[1])==null?void 0:w.split(",").map(d=>Number(d.trim()));m&&P.setTransform(m[0],m[1],m[2],m[3],m[4],m[5])}else P.setTransform(1,0,0,1,0,0);P.drawImage(S,0,0)}}),P.globalAlpha=1,P.setTransform(1,0,0,1,0,0);const W=e.type==="jpeg"?"image/jpeg":"image/png",j=E.toDataURL(W,e.type==="jpeg"?e.quality:void 0),ee=e.type==="jpeg"?"jpg":"png";l(j,`${e.fileName}.${ee}`),r("export-end",j)}catch(c){r("export-error",c)}}),u.renderSync())};return t({exportMap:s}),(c,C)=>(y(),H("div",{title:o("exportMap.title"),class:G(["ol-styled-control-item","export-map-control"]),onClick:i},[J(c.$slots,"default",{},()=>[C[0]||(C[0]=g("svg",{class:"export-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M5 20h14v-2H5v2zm7-18l-5 5h3v6h4V7h3l-5-5z"})],-1))])],8,Tt))}}),Ht=["title"],Et=Y({__name:"OlStyledHomeControl",props:{extent:{},duration:{default:800}},emits:["click","go-home"],setup(f,{expose:t,emit:a}){const o=s=>B?B.t(s):U.t(s),e=f,r=a,u=Q("map"),i=k(null);ve(()=>{if(!u)return;const s=u.getView();e.extent&&e.extent.length===4?i.value=e.extent:u.getSize()?i.value=s.calculateExtent():u.once("postrender",()=>{try{debugger;const c=u.getSize(),[C=0,b=0]=c??[0,0];C>0&&b>0&&(i.value=s.calculateExtent())}catch{}})});const l=s=>{if(r("click",s),!u){console.warn("map instance not found");return}const c=u.getView();if(i.value){debugger;c.fit(i.value,{duration:e.duration}),r("go-home",i.value)}};return t({goHome:l}),(s,c)=>(y(),H("div",{title:o("home.title"),class:G(["ol-styled-control-item","home-control"]),onClick:l},[J(s.$slots,"default",{},()=>[c[0]||(c[0]=g("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})],-1))],!0)],8,Ht))}}),Ft=ae(Et,[["__scopeId","data-v-9eb8fd1e"]]),Ot=["title"],Pt={class:"ol-styled-label-input-panel"},It=["placeholder"],Bt={class:"actions"},Rt=Y({__name:"OlStyledTextLabelControl",props:{font:{default:"sans-serif"},fontSize:{default:12},fillColor:{default:"#2f4b59"},strokeColor:{default:"#ffffff"},strokeWidth:{default:2},offsetX:{default:0},offsetY:{default:-12},clearOnClose:{type:Boolean,default:!1}},emits:["click","label-add"],setup(f,{expose:t,emit:a}){const o=k(null),e=S=>B?B.t(S):U.t(S),r=f,u=a,i=Q("map"),{controlState:l,closeAllControls:s}=re(),c=k(),C=k(null),b=k(""),E=k(null),P=S=>{if(u("click",S),!i){console.warn("地图实例未找到");return}l.value.textLabelActive?l.value.textLabelActive=!1:(s(),l.value.textLabelActive=!0)},W=S=>{var F;const h=S.feature;E.value=h;try{const w=h.getGeometry();C.value=((F=w==null?void 0:w.getCoordinates)==null?void 0:F.call(w))||null,He(()=>{var z;(z=o.value)==null||z.focus()})}catch{C.value=null}b.value=""},j=()=>{const S=b.value.trim();if(!S||!E.value)return;const h=new Ie({text:new Be({text:S,font:`${r.fontSize}px ${r.font}`,fill:new Ve({color:r.fillColor}),stroke:new Re({color:r.strokeColor,width:r.strokeWidth}),offsetX:r.offsetX,offsetY:r.offsetY,textAlign:"center"})});E.value.setStyle(h),u("label-add",{feature:E.value,text:S}),b.value="",C.value=null,E.value=null},ee=()=>{var S,h;if(E.value)try{(h=(S=c.value.source)==null?void 0:S.removeFeature)==null||h.call(S,E.value)}catch{}b.value="",C.value=null,E.value=null};return se(()=>l.value.clearPlotLayerTag,S=>{S&&setTimeout(()=>{l.value.clearPlotLayerTag=!1},100)}),t({handleClick:P}),(S,h)=>{const F=$("ol-overlay"),w=$("ol-interaction-draw"),z=$("ol-source-vector"),I=$("ol-vector-layer");return y(),H("div",{title:e("textLabel.title"),class:G(["ol-styled-control-item","text-label-control",{active:q(l).textLabelActive}]),onClick:P},[J(S.$slots,"default",{},()=>[h[1]||(h[1]=g("svg",{class:"text-label-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[g("path",{d:"M5 4v3h5.5v12h3V7H19V4z"})],-1))],!0),q(l).textLabelActive?(y(),H(ne,{key:0},[C.value?(y(),te(F,{key:0,position:C.value,offset:[0,-10],positioning:"bottom-center",stopEvent:!0},{default:R(()=>[g("div",Pt,[Te(g("input",{class:"label-input",ref_key:"labelInputRef",ref:o,"onUpdate:modelValue":h[0]||(h[0]=n=>b.value=n),placeholder:e("textLabel.inputPrompt")},null,8,It),[[$e,b.value]]),g("div",Bt,[g("button",{class:"confirm",onClick:pe(j,["stop"])},oe(e("textLabel.confirm")),1),g("button",{class:"cancel",onClick:pe(ee,["stop"])},oe(e("textLabel.cancel")),1)])])]),_:1},8,["position"])):Z("",!0)],64)):Z("",!0),(f.clearOnClose?q(l).textLabelActive:!q(l).clearPlotLayerTag)?(y(),te(I,{key:1},{default:R(()=>[M(z,{ref_key:"labelsSourceRef",ref:c},{default:R(()=>[q(l).textLabelActive?(y(),te(w,{key:0,type:"Point",onDrawend:W})):Z("",!0)]),_:1},512)]),_:1})):Z("",!0)],10,Ot)}}}),Vt=ae(Rt,[["__scopeId","data-v-b6d192c4"]]),Dt={install(f,t){if(t){const a=We(t);je(a)}f.component("OlStyledZoomInControl",Ne),f.component("OlStyledZoomOutControl",Ue),f.component("OlStyledControlBar",Xe),f.component("OlStyledFullScreenControl",et),f.component("OlStyledMeasureLengthControl",st),f.component("OlStyledMeasureAreaControl",dt),f.component("OlStyledClearControl",ht),f.component("OlStyledSwipeControl",mt),f.component("OlStyledBaseLayerSwitcher",bt),f.component("OlStyledPlotControl",zt),f.component("OlStyledExportMapControl",$t),f.component("OlStyledHomeControl",Ft),f.component("OlStyledTextLabelControl",Vt)}};export{bt as OlStyledBaseLayerSwitcher,ht as OlStyledClearControl,Xe as OlStyledControlBar,$t as OlStyledExportMapControl,et as OlStyledFullScreenControl,Ft as OlStyledHomeControl,dt as OlStyledMeasureAreaControl,st as OlStyledMeasureLengthControl,zt as OlStyledPlotControl,mt as OlStyledSwipeControl,Vt as OlStyledTextLabelControl,Ne as OlStyledZoomInControl,Ue as OlStyledZoomOutControl,We as createI18n,Dt as default,jt as useI18n};
